/**
 * sofa-state-resolver-service - v0.1.0 - 2014-06-20
 * http://www.sofa.io
 *
 * Copyright (c) 2014 CouchCommerce GmbH (http://www.couchcommerce.com / http://www.sofa.io) and other contributors
 * THIS SOFTWARE CONTAINS COMPONENTS OF THE SOFA.IO COUCHCOMMERCE SDK (WWW.SOFA.IO).
 * IT IS PROVIDED UNDER THE LICENSE TERMS OF THE ATTACHED LICENSE.TXT.
 */
!function(a){"use strict";a.define("sofa.StateResolverService",function(a,b,c){var d={},e=c.get("apiEndpoint")+"states",f=c.get("storeCode"),g=c.get("useShopUrls"),h={};return d.registerState=function(a){h[a.url]=a},d.resolveState=function(c){var d=a.defer();return g||"/"!==c.charAt(0)||(c=c.substr(1)),h[c]?d.resolve(h[c]):b({method:"POST",url:e,data:{storeCode:f,url:c}}).then(function(a){d.resolve(a.data)},function(){d.reject()}),d.promise},d})}(sofa);